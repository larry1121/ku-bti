{"ast":null,"code":"import _regeneratorRuntime from\"/Users/usere/Documents/GitHub/ku-bti/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/usere/Documents/GitHub/ku-bti/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/usere/Documents/GitHub/ku-bti/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/usere/Documents/GitHub/ku-bti/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/usere/Documents/GitHub/ku-bti/node_modules/@babel/runtime/helpers/esm/createClass.js\";var HttpClient=/*#__PURE__*/function(){function HttpClient(baseURL){_classCallCheck(this,HttpClient);this.baseURL=baseURL;// this.authErrorEventBus = authErrorEventBus;\n}_createClass(HttpClient,[{key:\"fetch\",value:function(_fetch){function fetch(_x,_x2){return _fetch.apply(this,arguments);}fetch.toString=function(){return _fetch.toString();};return fetch;}(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,options){var res,data,message,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(this.baseURL).concat(url),_objectSpread(_objectSpread({},options),{},{headers:_objectSpread({'Content-Type':'application/json'},options.headers)}));case 2:res=_context.sent;_context.prev=3;_context.next=6;return res.json();case 6:data=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);console.error(_context.t0);case 12:if(!(res.status>299||res.status<200)){_context.next=19;break;}message=data&&data.message?data.message:'Something went wrong! ğŸ¤ª';error=new Error(message);if(!(res.status===401)){_context.next=18;break;}this.authErrorEventBus.notify(error);return _context.abrupt(\"return\");case 18:throw error;case 19:return _context.abrupt(\"return\",data);case 20:case\"end\":return _context.stop();}}},_callee,this,[[3,9]]);}));return function(_x3,_x4){return _ref.apply(this,arguments);};}())}]);return HttpClient;}();export{HttpClient as default};","map":{"version":3,"names":["HttpClient","baseURL","url","options","fetch","headers","res","json","data","console","error","status","message","Error","authErrorEventBus","notify"],"sources":["/Users/usere/Documents/GitHub/ku-bti/src/network/http.js"],"sourcesContent":["export default class HttpClient {\n  constructor(baseURL) {\n    this.baseURL = baseURL;\n    // this.authErrorEventBus = authErrorEventBus;\n  }\n\n  async fetch(url, options) {\n    const res = await fetch(`${this.baseURL}${url}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    });\n    let data;\n    try {\n      data = await res.json();\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (res.status > 299 || res.status < 200) {\n      const message =\n        data && data.message ? data.message : 'Something went wrong! ğŸ¤ª';\n      const error = new Error(message);\n      if (res.status === 401) {\n        this.authErrorEventBus.notify(error);\n        return;\n      }\n      throw error;\n    }\n    return data;\n  }\n}\n"],"mappings":"knBAAqBA,W,yBACnB,oBAAYC,OAAZ,CAAqB,kCACnB,KAAKA,OAAL,CAAeA,OAAf,CACA;AACD,C,wRAED,iBAAYC,GAAZ,CAAiBC,OAAjB,qKACoBC,MAAK,WAAI,KAAKH,OAAT,SAAmBC,GAAnB,iCAClBC,OADkB,MAErBE,OAAO,gBACL,eAAgB,kBADX,EAEFF,OAAO,CAACE,OAFN,CAFc,GADzB,QACQC,GADR,qDAUiBA,IAAG,CAACC,IAAJ,EAVjB,QAUIC,IAVJ,8FAYIC,OAAO,CAACC,KAAR,cAZJ,aAeMJ,GAAG,CAACK,MAAJ,CAAa,GAAb,EAAoBL,GAAG,CAACK,MAAJ,CAAa,GAfvC,2BAgBUC,OAhBV,CAiBMJ,IAAI,EAAIA,IAAI,CAACI,OAAb,CAAuBJ,IAAI,CAACI,OAA5B,CAAsC,0BAjB5C,CAkBUF,KAlBV,CAkBkB,GAAIG,MAAJ,CAAUD,OAAV,CAlBlB,MAmBQN,GAAG,CAACK,MAAJ,GAAe,GAnBvB,2BAoBM,KAAKG,iBAAL,CAAuBC,MAAvB,CAA8BL,KAA9B,EApBN,8CAuBUA,MAvBV,yCAyBSF,IAzBT,sE,qGANmBR,U"},"metadata":{},"sourceType":"module"}